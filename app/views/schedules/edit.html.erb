<div class="header">
	<div class="container">
		<div class="h1_container"><a class="root" href="<%= root_path %>"><h1>Schedule-Manager</h1></a></div>
	</div>
</div>
<div class="form_container">
	<h1>Edit Schedule</h1>
	<%= form_for @schedule do |f| %>
		<%= f.label :name %>
		<%= f.text_field :name %>
		<%= f.label :weeks, 'Weeks:', id: 'label_schedule_weeks' %>
		<%= f.check_box :weeks %>
		<%= f.submit 'Update schedule' %>
	<% end %>
</div>
<% if @schedule.weeks %>
	<div class="container">
		<h1 class="left">Weeks counter</h1>
	</div>
	<div class="weeks_timer">
		<p>Week counter is an instrument for tracking your weeks. You just have to input what current week is and it will keep track whether current week is Week1, or Week2. Attention! This counter will be available only for one month. At the end of the month period or at the end of calendar yeah it will automatically turn off.</p>
		<div class="run_timer">
			<input value="Start Counter" id="start_counter" class="green" type="submit">
			<%= form_for @schedule, html: {id: 'edit_schedule_counter_2'}, remote: true, format: :json do |f| %>
				<%= hidden_field_tag :counter, 'stop_counter' %>
				<%= f.check_box :weeks_counter, id: 'schedule_weeks_counter_2', value: true %>
				<%= f.submit 'Stop Counter', class: 'redd' %>
			<% end %>
		</div>
		<div class="counter_content">
			<% unless @schedule.weeks_counter %>
				<%= form_for @schedule, html: {id: 'edit_schedule_counter_1'}, remote: true, format: :json do |f| %>
					<%= hidden_field_tag :counter, 'start_counter' %>
					<div class="form_element">
						<h3>Choose what current week is:</h3>
					</div>
					<div class="form_element">
						<%= radio_button_tag :current_week, 'Week1' %>
						<%= label_tag :current_week_Week1, 'Week 1', class:'radio_label' %>
					</div>
					<div class="form_element">
						<%= radio_button_tag :current_week, 'Week2' %>
						<%= label_tag :current_week_Week2, 'Week 2', class:'radio_label' %>
					</div>
					<div class="form_element">
						<h3>Choose the local time of the schedule</h3>
					</div>
					<div class="form_element">
						<%= f.select :local_time, options_for_select([['UTC-12','-12:00'],['UTC-11','-11:00'],['UTC-10','-10:00'],['UTC-9','-09:00'],['UTC-8','-08:00'],['UTC-7','-07:00'],['UTC-6','-06:00'],['UTC-5','-05:00'],['UTC-4','-04:00'],['UTC-3','-03:00'],['UTC-2','-02:00'],['UTC-1','-01:00'],['UTC+0','+00:00'],['UTC+1','+01:00'],['UTC+2','+02:00'],['UTC+3','+03:00'],['UTC+4','+04:00'],['UTC+5','+05:00'],['UTC+6','+06:00'],['UTC+7','+07:00'],['UTC+8','+08:00'],['UTC+9','+09:00'],['UTC+10','+10:00'],['UTC+11','+11:00'],['UTC+12','+12:00'],['UTC+13','+13:00'],['UTC+14','+14:00'],], ['UTC+0','+00:00']) %>
					</div>
					<div class="form_element">
						<%= f.check_box :weeks_counter, id: 'schedule_weeks_counter_1', value: true %>
					</div>
					<div class="form_element">
						<%= f.submit 'Start Counter', class: 'green'%>
					</div>
				<% end %>
			<% else %>
			<% end %>
		</div>
	</div>
	<script type="text/javascript">
		var start_counter = $('#start_counter'),
			counter_content = $('.counter_content').hide(),
			stop_counter = $('#edit_schedule_counter_2'),
			stop_counter_submit = $('#edit_schedule_counter_2 input[type="submit"]'),
			stop_counter_check = $('#schedule_weeks_counter_2');
		<% if @schedule.weeks_counter %>
			start_counter.hide();
			stop_counter_check.removeAttr('checked','checked');
		<% else %>
			stop_counter.hide();
		<% end %>
		start_counter.on('click', function() {
    		start_counter.hide();
    		stop_counter.show();
    		counter_content.slideDown(200);
    		stop_counter_submit.attr('disabled','disabled');
    	});
    	stop_counter.bind('ajax:success', function(evt, data,status, xhr) {
    		console.log("ajax:success");
    		stop_counter_submit.removeAttr('disabled','disabled');
    		start_counter.show();
    		stop_counter.hide();
    		counter_content.slideUp(200);
    	});
    	stop_counter.submit( function(){
    		stop_counter_submit.attr('disabled','disabled');
    	});
	</script>
<% end %>